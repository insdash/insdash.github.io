---
import SEO from '@/components/layout/SEO.astro';
import type { SeoData } from '@/ts/type.ts';

const { title, description, image, url, keywords } = Astro.props as SeoData;

const baseUrl = import.meta.env.SITE || 'https://insdash.github.io';
const pageUrl = url ?? Astro.url.pathname;
const canonicalUrl = `${baseUrl}${pageUrl.startsWith('/') ? pageUrl : `/${pageUrl}`}`;

//@type: SoftwareSourceCode - further can define in each project.
const jsonLd = {
  "@context": "https://schema.org",
  "@type": "ComputerProgram",
  "name": title ?? 'insdash',
  "description": description ?? '',
  "url": canonicalUrl,
  "image": image,
  "keywords": keywords,
  "author": {
    "@type": "Company",
    "name": "insdash",
    "url": baseUrl,
    "sameAs": [
      "https://insdash.github.io/"
    ],
    "title": "Frontend Developer & Interaction Designer",
    "knowsAbout": [
      "Frontend Development",
      "Interaction Design",
      "UI/UX Design",
      "Responsive Web Design",
      "HTML",
      "CSS",
      "JavaScript",
      "TypeScript",
      "React",
      "Vue.js",
      "Node.js",
      "Accessibility (a11y)",
      "User Experience",
      "Prototyping",
      "Web Performance Optimization",
      "Cross-Browser Compatibility",
      "Design Systems"
    ], 
  }
};
---

<script is:inline>
  document.addEventListener('DOMContentLoaded', () => {
    const pref = localStorage.getItem('mode') || 'tonality';
    const applied =
      pref === 'light_mode'
        ? 'light_mode'
        : pref === 'dark_mode'
          ? 'dark_mode'
          : window.matchMedia('(prefers-color-scheme: dark)').matches
            ? 'dark_mode'
            : 'light_mode';

    document.body.className = applied;
    const meta = document.querySelector('meta[name="color-scheme"]');
    if (meta) meta.content = applied;
  });
</script>

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta property="og:type" content="website" />
  <meta name="author" content="insdash" />
  <meta name="copyright" content="insdash" />
  <meta name="color-scheme" content="light dark" />
  <link rel="icon" type="image/svg+xml" href="./insdash.svg" />
  <link
    rel="icon"
    type="image/png"
    sizes="32x32"
    href="./images/logo/insdash_dark.png"
  />
  <script type="application/ld+json" set:html={JSON.stringify(jsonLd)} />
  <SEO
    title={title}
    description={description}
    image={image}
    url={canonicalUrl}
    keywords={keywords}
  />
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com" />
  <link
    href="https://fonts.googleapis.com/css2?family=DM+Mono:wght@300;400;500&display=swap"
    rel="stylesheet"
  />
  <!--icon -->
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
  />
  <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
  />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
  />
  <!-- GA -->
  <script
    is:inline
    type="text/partytown"
    async
    src="https://www.googletagmanager.com/gtag/js?id=G-795EK5W2DW">
  </script>
  <script is:inline type="text/partytown">
    window.dataLayer = window.dataLayer || [];
    function gtag(...args) { dataLayer.push(args); }
    gtag('js', new Date());
    gtag('config', 'G-795EK5W2DW', { anonymize_ip: true });
  </script>
</head>
